---
// Components
import PricingCard from '../molecules/PricingCard.astro'
import H2 from '../atoms/H2.tsx'
import TextIcon from '../atoms/TextIcon.astro'

// Libs
import clsx from 'clsx'

// Types
import type { PricingCardType } from '../../types/pricing-card'
import type { TextIconType } from '../../types/text-icon'

// Extend PricingCardType with TextIconType (features)
type PricingCardTypeWithFeatures = PricingCardType & {
  features: TextIconType[]
}

// Data
const pricingCards = [
  {
    name: 'Plan Mensual',
    description: 'Para empezar a prepararte sin ataduras',
    price: '35',
    btnText: 'Empezar ahora',
    tagText: '',
    important: false,
    footerText: '',
    features: [
      {
        iconName: 'check',
        text: 'Temario completo y actualizado',
        textVariant: 'muted',
      },
      {
        iconName: 'check',
        text: 'Temario completo y actualizado',
        textVariant: 'muted',
      },
      {
        iconName: 'check',
        text: 'Widget de convocatorias',
        textVariant: 'muted',
      },
      {
        iconName: 'check',
        text: 'Generador de casos y tests (limitado)',
        textVariant: 'muted',
      },
      {
        iconName: 'check',
        text: 'Buscador de recursos con AI (limitado)',
        textVariant: 'muted',
      },
    ],
  },
  {
    name: 'Plan Mensual Pro',
    description: 'Desbloquea todo el poder de la IA sin permanencia',
    price: '57',
    btnText: 'Elegir Plan Pro',
    tagText: 'MÁS POPULAR',
    important: true,
    footerText: '',
    features: [
      {
        iconName: 'check',
        text: 'Todo lo del plan Mensual',
        textVariant: 'muted',
      },
      {
        iconName: 'bolt',
        text: 'Generación con IA ilimitada',
        textVariant: 'secondary',
      },
      {
        iconName: 'bookOpen',
        text: 'Acceso a exámenes de convocatorias anteriores',
        textVariant: 'secondary',
      },
      {
        iconName: 'shield',
        text: 'Descarga de todo el temario en PDF',
        textVariant: 'secondary',
      },
    ],
  },
  {
    name: 'Plan Anual Pro',
    description: 'El compromiso definitivo con tu plaza. El mejor valor.',
    price: '570',
    btnText: 'Aportar por mi futuro',
    tagText: 'AHORRA 2 MESES',
    important: false,
    footerText:
      'La inversión mas completa, para asegurar tu preparación, con las mejores herramientas del mercado.',
    features: [
      {
        iconName: 'check',
        text: 'Todo lo del plan Mensual Pro',
        textVariant: 'muted',
      },
      {
        iconName: 'bolt',
        text: 'Generación con IA ilimitada',
        textVariant: 'secondary',
      },
      {
        iconName: 'bookOpen',
        text: 'Acceso a exámenes de convocatorias anteriores',
        textVariant: 'secondary',
      },
      {
        iconName: 'chart',
        text: 'Descarga de todo el temario en PDF',
        textVariant: 'secondary',
      },
    ],
  },
] as PricingCardTypeWithFeatures[]
---

<section class={clsx('container', 'text-center')}>
  <H2> Un precio justo para tu futuro </H2>
  <p class={clsx('max-w-xl', 'mx-auto', 'mt-4')}>
    Elije el plan que se adapte a ti. Todos los planes de pago son sin
    compromiso de permanencia.
  </p>

  <div class={clsx('mt-12', 'grid', 'grid-cols-1 lg:grid-cols-3', 'gap-2')}>
    {
      pricingCards.map((card) => (
        <PricingCard
          name={card.name}
          description={card.description}
          price={card.price}
          btnText={card.btnText}
          btnLink={card.btnLink}
          tagText={card.tagText}
          important={card.important}
          footerText={card.footerText}
          className={clsx('mx-auto')}
        >
          {card.features.map((feature) => (
            <TextIcon
              iconName={feature.iconName}
              text={feature.text}
              textVariant={feature.textVariant}
            />
          ))}
        </PricingCard>
      ))
    }
  </div>
</section>
