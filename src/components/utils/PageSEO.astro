---
// Components
import BaseSEO from './base/BaseSEO.astro'

// Data
import { plansData } from '../../libs/constants/plans'
import { heroTitle, heroDescription } from '../../libs/constants/hero'

// Reas props
interface Props {
  currentPage: string // Current page
  pageDescription: string // Description
  extraKeywords?: string // Extra keywords
}
const {
  currentPage,
  pageDescription,
  extraKeywords = '',
} = Astro.props as Props

// Environment variables
const domain = import.meta.env.VITE_BASE_URL

// Description and keywords
const defaultDescription = `${heroTitle} ${heroDescription}`
const defaultKeywords =
  'trabajo social canarias, oposiciones trabajo social canarias, temario trabajo social, casos prácticos trabajo social, estudio trabajo social, preparación oposiciones trabajo social, examen trabajo social canarias, temario canario trabajo social, generador casos prácticos IA, tests trabajo social, ejercicios oposiciones, preguntas trabajo social, recursos trabajo social canarias, preparar oposiciones, convocatorias trabajo social, plaza trabajo social canarias'
const description = pageDescription || defaultDescription
const keywords = `${defaultKeywords}, ${extraKeywords}`

// addressElems = {
//   streetAddress: "Cto. Colonias 118",
//   addressLocality: "Mérida",
//   addressRegion: "Yucatán",
//   postalCode: "97100",
//   addressCountry: "Mexico"
// }

// const phoneUnformatted = '+52 999 448 6075'
// const phone = phoneUnformatted.replace(/\s/g, '').replace('+', '')
// const openingHours = ['Mo-Fr 10:00-20:00', 'Sa 11:00-17:00']
// const openingHoursSpecification = [
//   {
//     '@type': 'OpeningHoursSpecification',
//     dayOfWeek: ['Monday', 'Tuesday', 'Wednesday', 'Thursday', 'Friday'],
//     opens: '10:00',
//     closes: '20:00',
//   },
//   {
//     '@type': 'OpeningHoursSpecification',
//     dayOfWeek: 'Saturday',
//     opens: '11:00',
//     closes: '17:00',
//   }
// ]

// Extra JSON
const extraJson = {
  // Price
  priceRange: '€€',

  // Contact
  // telephone: phoneUnformatted,

  // Hours
  // openingHours: openingHours,
  // openingHoursSpecification: openingHoursSpecification,

  // Services
  makesOffer: [
    ...plansData.map((plan) => ({
      '@type': 'Offer',
      name: plan.name,
      description: plan.description,
      url: `${domain}/pricing`,
      priceCurrency: 'EUR',
      price: plan.price,
      availability: 'https://schema.org/InStock',
      category: 'Servicio de Preparación de Oposiciones',
    })),
  ],

  // Founder
  foundingDate: '2025',
  founder: {
    '@type': 'Organization',
    name: 'Socialia',
    description: 'Plataforma de preparación de oposiciones de Trabajo Social en Canarias',
  },

  // rating
  aggregateRating: {
    '@type': 'AggregateRating',
    ratingValue: '5.0',
    reviewCount: '75',
  },

  // Keywords adicionales para el JSON-LD
  keywords: 'trabajo social canarias, oposiciones trabajo social, preparación oposiciones, casos prácticos trabajo social, temario canario',

  // // Location
  // address: {
  //   '@type': 'PostalAddress',
  //   ...addressElems,
  // },
  // geo: {
  //   '@type': 'GeoCoordinates',
  //   latitude: 20.9984621,
  //   longitude: -89.6152096,
  // },
}
---

<BaseSEO
  currentPage={currentPage}
  jsonType='EducationalOrganization'
  extraJson={extraJson}
  description={description}
  keywords={keywords}
  author='Socialia Team'
/>
